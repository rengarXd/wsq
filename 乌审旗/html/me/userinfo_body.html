<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
		<meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
		<title>Hui</title>
		<link href="../../css/Hui.css" rel="stylesheet" type="text/css" />
		<link href="../../css/fonts/iconfont.css" rel="stylesheet" type="text/css" />
		<style type="text/css">
			.confirm_btn {
				background: -webkit-gradient(linear, left top, left bottom, from(#00b3ff), to(#10a0d3)) !important;
				background-size: cover;
				border-radius: 8px !important;
				-webkit-border-radius: 8px !important;
			}
			.confirm_btn:active {
				background-color: #109fd4 !important;
			}
		</style>
	</head>
	<body class="H-flexbox-vertical">
		<div class="H-padding-vertical-bottom-10"></div>
		<div class="H-text-list H-flexbox-horizontal  H-theme-background-color-white H-border-vertical-bottom-after H-border-vertical-top-after H-vertical-middle">
			<div class="H-flex-item H-padding-horizontal-both-10 H-font-size-16 H-padding-vertical-both-12">
				用户名
			</div>
			<span id="user_code" class="H-icon H-font-size-12 H-padding-horizontal-right-20 H-display-block"></span>
		</div>
		<div class="H-padding-vertical-bottom-10"></div>
		<div onclick="changePhoneNum()" class="H-text-list H-flexbox-horizontal  H-theme-background-color-white H-border-vertical-bottom-after H-border-vertical-top-after H-vertical-middle H-touch-active">
			<div class="H-flex-item H-padding-horizontal-both-10 H-font-size-16 H-padding-vertical-both-12">
				手机号
			</div>
			<span id="mob_code" class="H-icon H-font-size-12 H-padding-horizontal-right-5 H-display-block"></span>
			<span class="H-icon H-padding-horizontal-right-5 H-display-block"><i class="iconfont icon-zhankai H-theme-font-color-ccc H-font-size-14 H-vertical-middle"></i></span>
		</div>
		<div onclick="changePersonNum()" class="H-text-list H-flexbox-horizontal  H-theme-background-color-white H-border-vertical-bottom-after H-vertical-middle H-touch-active">
			<div class="H-flex-item H-padding-horizontal-both-10 H-font-size-16 H-padding-vertical-both-12">
				RFID卡号
			</div>
			<span id="rfid_code" class="H-icon H-font-size-12 H-padding-horizontal-right-5 H-display-block"></span>
			<span class="H-icon H-padding-horizontal-right-5 H-display-block"><i class="iconfont icon-zhankai H-theme-font-color-ccc H-font-size-14 H-vertical-middle"></i></span>
		</div>
		<div  class="H-text-list H-flexbox-horizontal  H-theme-background-color-white H-border-vertical-bottom-after H-vertical-middle">
			<div class="H-flex-item H-padding-horizontal-both-10 H-font-size-16 H-padding-vertical-both-12">
				人员类型
			</div>
			<span id="person_type" class="H-icon H-font-size-12 H-padding-horizontal-right-5 H-display-block"></span>
			<span class="H-icon H-padding-horizontal-right-5 H-display-block"><i class="iconfont icon-zhankai H-theme-font-color-ccc H-font-size-14 H-vertical-middle"></i></span>
			<!--<span class="H-padding-horizontal-right-20 H-display-block"></span>-->
		</div>
		<div  class="H-text-list H-flexbox-horizontal  H-theme-background-color-white H-border-vertical-bottom-after H-vertical-middle">
			<div class="H-flex-item H-padding-horizontal-both-10 H-font-size-16 H-padding-vertical-both-12">
				真实姓名
			</div>
			<span id="user_name" class="H-icon H-font-size-12 H-padding-horizontal-right-5 H-display-block"></span>
			<span class="H-icon H-padding-horizontal-right-5 H-display-block"><i class="iconfont icon-zhankai H-theme-font-color-ccc H-font-size-14 H-vertical-middle"></i></span>
			<!--<span class="H-padding-horizontal-right-20 H-display-block"></span>-->
		</div>
		<div  class="H-text-list H-flexbox-horizontal  H-theme-background-color-white H-border-vertical-bottom-after H-vertical-middle">
			<div class="H-flex-item H-padding-horizontal-both-10 H-font-size-16 H-padding-vertical-both-12">
				GPS卡号
			</div>
			<span id="gps_code" class="H-icon H-font-size-12 H-padding-horizontal-right-5 H-display-block"></span>
			<span class="H-icon H-padding-horizontal-right-5 H-display-block"><i class="iconfont icon-zhankai H-theme-font-color-ccc H-font-size-14 H-vertical-middle"></i></span>
			<!--<span class="H-padding-horizontal-right-20 H-display-block"></span>-->
		</div>
		<div class="H-text-list H-flexbox-horizontal  H-theme-background-color-white H-border-vertical-bottom-after H-vertical-middle">
			<div class="H-flex-item H-padding-horizontal-both-10 H-font-size-16 H-padding-vertical-both-12">
				职务
			</div>
			<span id="person_duty" class="H-icon H-font-size-12 H-padding-horizontal-right-5 H-display-block"></span>
			<span class="H-icon H-padding-horizontal-right-5 H-display-block"><i class="iconfont icon-zhankai H-theme-font-color-ccc H-font-size-14 H-vertical-middle"></i></span>
			<!--<span class="H-padding-horizontal-right-20 H-display-block"></span>-->
		</div>
		<div class="H-padding-20">
			<button class="H-button confirm_btn H-border-none H-theme-font-color-white H-width-100-percent H-font-size-15 H-outline-none H-padding-vertical-both-12 H-padding-horizontal-both-20" tapmode onclick="exit();">
				安全退出
			</button>
		</div>
		<script src="../../script/wsq.js" type="text/javascript"></script>
		<script src="../../script/zepto.min.js" type="text/javascript"></script>
		<script type="text/javascript">
			var user = null;
			apiready = function() {
				api.getPrefs({
					key : 'userinfo'
				}, function(ret, err) {
					if (ret && ret.value) {
						user = eval('(' + ret.value + ')');
						_ajax();
					} else {
						api.alert({
							title : '登录状态异常，请重新登录'
						}, function(ret, err) {
							api.closeWin();
						});
					}
				});
			}
			function _ajax() {
				$xy.ajax(function(ret, err) {
					//api.hideProgress();
					if (ret.success) {
						console.log(JSON.stringify(ret));
						//手机号
						document.getElementById('mob_code').innerHTML = ret.data[0].mob_code;
						//账号
						document.getElementById('user_code').innerHTML = ret.data[0].user_code;
						//人员类型
						document.getElementById('person_type').innerHTML = ret.data[0].person_type;
						//GPS卡号
						document.getElementById('gps_code').innerHTML = ret.data[0].gps_code;
						//职务
						document.getElementById('person_duty').innerHTML = ret.data[0].person_duty;
						//RFID卡号
						document.getElementById('rfid_code').innerHTML = ret.data[0].person_num;
						//姓名
						document.getElementById('user_name').innerHTML = ret.data[0].user_name;
					} else if (ret) {
						api.toast({
							msg : ret.message
						});
					} else {
						api.toast({
							msg : err.body
						});
					}
				}, 'appuserinfo&funid=sys_user&user_id=' + user[0].user_id + '&uuid=' + user[0].uuid);
			}

			//退出登录
			function exit() {
				api.confirm({
					title : '温馨提示',
					msg : '您确定要退出登录吗？',
					buttons : ['取消', '确定']
				}, function(ret, err) {
					if (ret.buttonIndex == 2) {
						var ajpush = api.require('ajpush');
						ajpush.removeListener();
						api.removePrefs({
							key : 'userinfo'
						});
						//						api.sendEvent({
						//							name : 'reload'
						//						});
						//延时关闭窗口
						setTimeout(function() {
							api.closeToWin({
								name : 'index'
							});
							$xy.openWin('login', '../login/login.html', false, api.pageParam);
						}, 500);
					}
				});
			}
		</script>
	</body>
</html>